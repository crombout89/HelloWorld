<h1>🔔 Your Notifications</h1>

<% if (notifications.length === 0) { %>
<p>No notifications yet!</p>
<% } else { %>
<ul>
  <% notifications.forEach(note => { %>
  <li style="margin-bottom: 1rem;">
    <p><strong>📬</strong> <%= note.message %></p>

    <% if (note.meta?.type === "friend_request") { %>
    <form action="/friends/respond/<%= note.meta.requestId %>" method="POST" style="display:inline;">
      <input type="hidden" name="decision" value="accept" />
      <input type="hidden" name="notificationId" value="<%= note._id %>" />
      <button type="submit">✅ Accept</button>
    </form>
    <form action="/friends/respond/<%= note.meta.requestId %>" method="POST" style="display:inline;">
      <input type="hidden" name="decision" value="decline" />
      <input type="hidden" name="notificationId" value="<%= note._id %>" />
      <button type="submit">❌ Decline</button>
    </form>
    <% } else if (note.link) { %>
    <a href="<%= note.link %>" class="btn">View</a>
    <% } %>
  </li>
  <% }) %>
</ul>
<% } %>