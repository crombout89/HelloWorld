<html lang="en">
    <head>
        <meta name="viewport" content="width=device-width,
        initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
        <title><%= title %></title>
        <link rel='stylesheet' href='/styles.css' />
        <link rel='stylesheet' href='css/dashboard.css' />
        <link rel='stylesheet' href='css/effects.css' />
        <link rel="stylesheet" href="https://use.typekit.net/yrl0zql.css">
    </head>
<body>
    <div class="container">
        <h1>User Dashboard</h1>
        
        <nav>
            <a href="/logout">Logout</a>
        </nav>

        <section class="profile-overview">
            <h2>Profile Overview</h2>
            <p><strong>Name:</strong> <%= user.profile.firstName %> <%= user.profile.lastName %></p>
            <p><strong>Email:</strong> <%= user.email %></p>
            
            <% if (user.profile.location) { %>
            <p><strong>Saved Location:</strong> <%= user.profile.location %></p>
            <% } %>
        </section>

        <section class="current-location">
            <h2>Your Current Location</h2>
            
            <% if (user.geolocation && user.geolocation.coordinates) { %>
                <div id="location-details">
                    <p><strong>Latitude:</strong> <%= user.geolocation.coordinates[1] %></p>
                    <p><strong>Longitude:</strong> <%= user.geolocation.coordinates[0] %></p>
                    
                    <% if (user.profile.location && user.profile.location.city) { %>
                    <p><strong>City:</strong> <%= user.profile.location.city %></p>
                    <% } %>
                    
                    <% if (user.profile.location && user.profile.location.country) { %>
                    <p><strong>Country:</strong> <%= user.profile.location.country %></p>
                    <% } %>
                </div>
            <% } else { %>
                <p id="location-status">Location not set</p>
                <button id="get-location-btn" type="button">Get Current Location</button>
            <% } %>
        </section>

        <section class="account-details">
            <h2>Account Details</h2>
            <p><strong>Member Since:</strong> <%= new Date(user.createdAt).toLocaleDateString() %></p>
            
            <div class="interests">
                <h3>Interests:</h3>
                <% if (user.profile.interests && user.profile.interests.length > 0) { %>
                    <p><%= user.profile.interests.join(', ') %></p>
                <% } else { %>
                    <p>No interests added</p>
                <% } %>
            </div>
        </section>

        <section class="actions">
            <button id="edit-profile-btn">Edit Profile</button>
            <button id="discover-users-btn">Discover Users</button>
        </section>

        <section id="nearby-users-section">
            <h2>Nearby Users</h2>
            <div id="nearby-users-list"></div>
        </section>
    </div>

    <%- include('partials/navbar') %>

    <!-- Load scripts at the end of body -->
    <script src="/assets/js/location.js"></script>
    <script src="/assets/js/dashboard.js"></script>
</body>
</html>