<link rel="stylesheet" href="/css/profile.css">

<div class="profile-edit-container page-title">
  <h2>Update Your Profile</h2>

  <!-- FORM: Update name, photo, bio -->
  <form action="/profile/update" method="POST" enctype="multipart/form-data">
    <div>
      <label for="photo">Upload Profile Photo:</label>
      <input type="file" name="photo" id="photo">
    </div>
  
    <% if (user.profile?.profilePicture) { %>
      <p>Current Photo:</p>
      <img src="<%= user.profile.profilePicture %>" alt="Profile Photo" width="100">
    <% } %>
  
    <div>
      <label for="firstName">First Name:</label>
      <input type="text" name="firstName" id="firstName" value="<%= user.profile?.firstName || '' %>">
    </div>

    <div>
      <label for="lastName">Last Name:</label>
      <input type="text" name="lastName" id="lastName" value="<%= user.profile?.lastName || '' %>">
    </div>

    <div>
      <label for="bio">Bio:</label>
      <textarea name="bio" id="bio" rows="4"><%= user.profile?.bio || '' %></textarea>
    </div>

    <button type="submit">Save Profile</button>
  </form>

  <!-- FORM: Add interests -->
  <h2>Interests</h2>

  <% if (user.profile?.interests && user.profile.interests.length > 0) { %>
    <ul>
      <% user.profile.interests.forEach(interest => { %>
        <li><%= interest %></li>
      <% }); %>
    </ul>
  <% } else { %>
    <p>No interests added yet.</p>
  <% } %>

  <form action="/profile/interests" method="POST">
    <label for="interest">Add New Interest:</label>
    <input type="text" name="interest" id="interest" required>
    <button type="submit">Add Interest</button>
  </form>

  <!-- FORM: Preferences -->
<h2>Preferences</h2>

<form action="/profile/preferences" method="POST">
  <div>
    <label>
      <input type="checkbox" name="preferences" value="friendship"
        <%= user.profile?.preferences?.includes("friendship") ? "checked" : "" %> />
      Friendship
    </label>
  </div>

  <div>
    <label>
      <input type="checkbox" name="preferences" value="language exchange"
        <%= user.profile?.preferences?.includes("language exchange") ? "checked" : "" %> />
      Language Exchange
    </label>
  </div>

  <div>
    <label>
      <input type="checkbox" name="preferences" value="get info about your destination"
        <%= user.profile?.preferences?.includes("get info about your destination") ? "checked" : "" %> />
      Get Info About Your Destination
    </label>
  </div>

  <button type="submit">Save Preferences</button>
</form>


  <script src="/js/location.js"></script>
</div>
