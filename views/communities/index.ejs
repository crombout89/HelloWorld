<title><%= title %></title>
<link rel="stylesheet" href="/css/communities.css" />

<div class="page-title">
  <h1>My Communities</h1>
</div>

<div class="community-list">
  <% if (communities.length === 0) { %>
    <p>You haven't joined any communities yet.</p>
  <% } else { %>
    <% communities.forEach(c => { %>
      <div class="community-card">
        <% if (c.coverImage) { %>
          <img src="<%= c.coverImage %>" alt="<%= c.name %> cover image" class="community-cover">
        <% } %>

        <h2><%= c.name %></h2>
        <p><strong>Members:</strong> <%= c.members.length %></p>
        <p><%= c.description || 'No description yet.' %></p>

        <div class="community-actions">
          <a href="/communities/<%= c._id %>"><button>View</button></a>
          <% if (c.owner._id.toString() === userId) { %>
            <a href="/communities/<%= c._id %>/edit"><button>Edit</button></a>
          <% } %>
        </div>
      </div>
    <% }) %>
  <% } %>
</div>

<div class="page-actions">
  <a href="/communities/new" class="button">âž• Create New Community</a>
</div>
